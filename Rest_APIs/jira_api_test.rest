##############################################
#           JIRA CLOUD REST CLIENT
#       VS CODE REST CLIENT (.http file)
##############################################

@domain = arunvanam.atlassian.net
@email = arun.vanam@outlook.com
@token = YOUR_API_TOKEN_HERE

### -----------------------------------------
### 0. Test Authentication (MUST WORK FIRST)
### -----------------------------------------
GET https://{{domain}}/rest/api/3/serverInfo
Authorization: Basic {{$base64 {{email}}:{{token}}}}
Accept: application/json


### -----------------------------------------
### 1. List All Projects
### -----------------------------------------
GET https://{{domain}}/rest/api/3/project
Authorization: Basic {{$base64 {{email}}:{{token}}}}
Accept: application/json


### -----------------------------------------
### 2. Get All Issue Types
### -----------------------------------------
GET https://{{domain}}/rest/api/3/issuetype
Authorization: Basic {{$base64 {{email}}:{{token}}}}
Accept: application/json


### -----------------------------------------
### 3. Get All Fields in Jira (Epic Name, Story Points etc.)
### -----------------------------------------
GET https://{{domain}}/rest/api/3/field
Authorization: Basic {{$base64 {{email}}:{{token}}}}
Accept: application/json


### -----------------------------------------
### 4. Get Issue Types + Required Fields for Project (KAN)
### -----------------------------------------
GET https://{{domain}}/rest/api/3/issue/createmeta?projectKeys=KAN&expand=projects.issuetypes.fields
Authorization: Basic {{$base64 {{email}}:{{token}}}}
Accept: application/json


### -----------------------------------------
### 5. Search Issues (JQL Example)
### -----------------------------------------
GET https://{{domain}}/rest/api/3/search?jql=project=KAN
Authorization: Basic {{$base64 {{email}}:{{token}}}}
Accept: application/json


### -----------------------------------------
### 6. Get Issue Details (replace KAN-1)
### -----------------------------------------
GET https://{{domain}}/rest/api/3/issue/KAN-1
Authorization: Basic {{$base64 {{email}}:{{token}}}}
Accept: application/json


#############################################################
#                      CREATE OPERATIONS
#############################################################

### -----------------------------------------
### 7. Create Task (ADF format)
### -----------------------------------------
POST https://{{domain}}/rest/api/3/issue
Authorization: Basic {{$base64 {{email}}:{{token}}}}
Accept: application/json
Content-Type: application/json

{
  "fields": {
    "project": { "key": "KAN" },
    "summary": "Task created via REST Client",
    "issuetype": { "name": "Task" },
    "description": {
      "type": "doc",
      "version": 1,
      "content": [
        {
          "type": "paragraph",
          "content": [
            { "type": "text", "text": "This is a task created from VS Code REST Client." }
          ]
        }
      ]
    }
  }
}


### -----------------------------------------
### 8. Create Story (adjust required field from createmeta)
### -----------------------------------------
POST https://{{domain}}/rest/api/3/issue
Authorization: Basic {{$base64 {{email}}:{{token}}}}
Accept: application/json
Content-Type: application/json

{
  "fields": {
    "project": { "key": "KAN" },
    "summary": "Story created via REST Client",
    "issuetype": { "name": "Story" },
    "description": {
      "type": "doc",
      "version": 1,
      "content": [
        {
          "type": "paragraph",
          "content": [
            { "type": "text", "text": "Story created from VS Code REST Client." }
          ]
        }
      ]
    }
  }
}


### -----------------------------------------
### 9. Create Epic (Epic Name field required)
### customfield_10011 must match YOUR EPIC NAME FIELD ID
### -----------------------------------------
POST https://{{domain}}/rest/api/3/issue
Authorization: Basic {{$base64 {{email}}:{{token}}}}
Accept: application/json
Content-Type: application/json

{
  "fields": {
    "project": { "key": "KAN" },
    "summary": "Epic created via REST Client",
    "issuetype": { "name": "Epic" },
    "customfield_10011": "Epic API Name",
    "description": {
      "type": "doc",
      "version": 1,
      "content": [
        {
          "type": "paragraph",
          "content": [
            { "type": "text", "text": "This is an Epic created from REST Client." }
          ]
        }
      ]
    }
  }
}


#############################################################
#                      UPDATE OPERATIONS
#############################################################

### -----------------------------------------
### 10. Add Comment to Issue
### -----------------------------------------
POST https://{{domain}}/rest/api/3/issue/KAN-1/comment
Authorization: Basic {{$base64 {{email}}:{{token}}}}
Accept: application/json
Content-Type: application/json

{
  "body": {
    "type": "doc",
    "version": 1,
    "content": [
      {
        "type": "paragraph",
        "content": [
          { "type": "text", "text": "Comment added via REST Client." }
        ]
      }
    ]
  }
}


### -----------------------------------------
### 11. Get Available Transitions (Statuses)
### -----------------------------------------
GET https://{{domain}}/rest/api/3/issue/KAN-1/transitions
Authorization: Basic {{$base64 {{email}}:{{token}}}}
Accept: application/json


### -----------------------------------------
### 12. Transition Issue (Move Status)
### Replace transition ID from above
### -----------------------------------------
POST https://{{domain}}/rest/api/3/issue/KAN-1/transitions
Authorization: Basic {{$base64 {{email}}:{{token}}}}
Accept: application/json
Content-Type: application/json

{
  "transition": { "id": "11" }
}


### -----------------------------------------
### 13. Update Issue Fields (PUT)
### -----------------------------------------
PUT https://{{domain}}/rest/api/3/issue/KAN-1
Authorization: Basic {{$base64 {{email}}:{{token}}}}
Accept: application/json
Content-Type: application/json

{
  "fields": {
    "summary": "Updated summary from REST Client"
  }
}


#############################################################
#                      DELETE OPERATIONS
#############################################################

### -----------------------------------------
### 14. Delete Issue (irreversible!)
### -----------------------------------------
DELETE https://{{domain}}/rest/api/3/issue/KAN-99
Authorization: Basic {{$base64 {{email}}:{{token}}}}
Accept: application/json
